#include <stdio.h>#include <string.h>#include <stdlib.h>#include "symbolTable.h"/* pointer for the symbol table (point on node in the table) */symbolNode *head = NULL;symbol *symbolInTable(char *label) {	symbolNode *ptr = head;	/* scan the table and compare the label to the previous labels */	while (ptr != NULL) {		if (!strcmp(label, ptr->data.name))			return &(ptr->data);		ptr = ptr->next;	}	return NULL; /* symbol is not in table */}int addSymbol(char *label, int guide, int IC, int DC) {	symbolNode *newNode = (symbolNode*) malloc(sizeof(symbolNode));	symbol data;	/* check if symbol is already in the table */	if (symbolInTable(label)) {		printf("error in %d: label is already defined\n", lineNumber);		return -1; /* error code */	}	/* create new node */	strcpy(data.name, label);	data.isData = ((guide == DATA) || (guide == STR));	data.isEntry = (guide == ENTRY);	data.isExtern = (guide == EXTERN);	data.isCode = ((guide == ENTRY) || (guide == EXTERN) || (guide == CODE));	data.value = (data.isData) ? DC : ((data.isExtern) ? 0 : IC + MMRY_OFFSET);	newNode->data = data;	newNode->next = head;	head = newNode; /* add the label to be the first in the list (order doesn't matter) */	return 0; /* success code */}int getValue(char *label) {	symbol *S = symbolInTable(label);	if (S == NULL)		return -1; /* symbol is not in table */	return S->value;}int isSymbolExternal(char* label) {	symbol *S = symbolInTable(label);	if (S == NULL)		return -1; /* symbol is not in table */	return S->isExtern;}void updateDataLabels(int ICF) {	symbolNode *ptr = head;	/* add the offset for all data symbols */	while (ptr != NULL) {		if (ptr->data.isData)			ptr->data.value += ICF;		ptr = ptr->next;	}}int getValueFromSymbol(char *label) {	symbol *S = symbolInTable(label);	if (S == NULL)		return -1; /* symbol is not in table */	return S->value;}int makeEntry(char *label){	symbol *S = symbolInTable(label);	if (S == NULL)		return -1; /* symbol is not in table */			S->isEntry = 1;	return 1;}/* finds the next entry label */symbolNode * findEntryLabel(symbolNode *ptr){	ptr = ptr->next;	while (ptr != NULL){		if ( ptr->data.isEntry )			return (ptr);		ptr = ptr->next;	}		return NULL;}/* finds the next external label */symbolNode * findExternalLabel(symbolNode *ptr) {	ptr = ptr->next;	while (ptr != NULL){		if ( ptr->data.isExtern )			return (ptr);		ptr = ptr->next;	}		return NULL;}